# ============================================================
# Mihomo (Clash.Meta) ç»Ÿä¸€é…ç½®æ¨¡æ¿
# é€‚ç”¨å¹³å°: Linux / Android / Windows (ä¸‰ç«¯é€šç”¨)
# è®¾è®¡ç†å¿µ: ä¸æŒ‰æœåŠ¡åˆ†æµï¼Œä»…æŒ‰å›½å®¶/åœ°åŒºåˆ†ç»„ï¼Œæç®€è§„åˆ™
# ============================================================

# --- YAML Anchors (å…¬å…±è®¾ç½®å¤ç”¨) ---
# è‡ªåŠ¨é€‰æ‹©: url-test é€‰æœ€å¿«èŠ‚ç‚¹
ut: &ut
  type: url-test
  include-all-providers: true
  url: "http://cp.cloudflare.com/generate_204"
  interval: 180
  tolerance: 50
# è´Ÿè½½å‡è¡¡: consistent-hashing (åŒåŸŸååŒèŠ‚ç‚¹, ä¸è§¦å‘é£æ§)
lb: &lb
  type: load-balance
  strategy: consistent-hashing
  include-all-providers: true
  url: "http://cp.cloudflare.com/generate_204"
  interval: 180
pp: &pp
  type: http
  interval: 86400
  proxy: DIRECT
  health-check:
    enable: true
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300
    lazy: true

# --- åŸºç¡€è®¾ç½® ---
mixed-port: 7890
mode: rule
log-level: warning
allow-lan: true
unified-delay: true
tcp-concurrent: true
find-process-mode: strict
global-client-fingerprint: chrome

external-controller: 127.0.0.1:9090
secret: "YOUR_CLASH_API_SECRET"

geodata-mode: true
geo-auto-update: true
geo-update-interval: 72
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb"

# --- DNS é…ç½® (fake-ip + fallback åˆ†æµ) ---
dns:
  enable: true
  listen: :1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "localhost.ptlogin2.qq.com"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  proxy-server-nameserver:
    - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,private": [https://doh.pub/dns-query, https://dns.alidns.com/dns-query]
  fallback:
    - tls://8.8.4.4
    - tls://1.1.1.1
  fallback-filter:
    geoip: true
    geoip-code: CN
    geosite:
      - gfw
    ipcidr:
      - 240.0.0.0/4

# --- Proxy Providers (è®¢é˜…æº) ---
proxy-providers:
  provider1:
    <<: *pp
    url: "YOUR_SUB_URL_1"
    path: ./providers/provider1.yaml

  provider2:
    <<: *pp
    url: "YOUR_SUB_URL_2"
    path: ./providers/provider2.yaml

  provider3:
    <<: *pp
    url: "YOUR_SUB_URL_3"
    path: ./providers/provider3.yaml

# --- Proxy Groups (èŠ‚ç‚¹ç»„) ---
proxy-groups:
  - {name: ğŸ”° èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [âš¡ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨, ğŸ‡­ğŸ‡° é¦™æ¸¯å‡è¡¡, ğŸ‡¹ğŸ‡¼ å°æ¹¾è‡ªåŠ¨, ğŸ‡¹ğŸ‡¼ å°æ¹¾å‡è¡¡, ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨, ğŸ‡¯ğŸ‡µ æ—¥æœ¬å‡è¡¡, ğŸ‡°ğŸ‡· éŸ©å›½è‡ªåŠ¨, ğŸ‡°ğŸ‡· éŸ©å›½å‡è¡¡, ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨, ğŸ‡ºğŸ‡¸ ç¾å›½å‡è¡¡, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡å‡è¡¡, ğŸŒ å…¶ä»–è‡ªåŠ¨, ğŸŒ å…¶ä»–å‡è¡¡, DIRECT]}
  - {name: âš¡ è‡ªåŠ¨é€‰æ‹©, <<: *ut, exclude-filter: "(?i)å‰©ä½™|æµé‡|é‡ç½®|åˆ°æœŸ|è¿‡æœŸ|è®¢é˜…|å®˜ç½‘|é¢‘é“|ç¾¤ç»„|å¥—é¤|ç»­è´¹|å®¢æœ|é€šæŠ¥|å¤±è”|traffic|expire"}
  # --- å›½å®¶/åœ°åŒºç»„ (æ¯å›½åŒæ¨¡å¼: è‡ªåŠ¨é€‰æœ€å¿« + è´Ÿè½½å‡è¡¡) ---
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨, <<: *ut, filter: "(?i)æ¸¯|hk|hongkong|hong kong|ğŸ‡­ğŸ‡°"}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯å‡è¡¡, <<: *lb, filter: "(?i)æ¸¯|hk|hongkong|hong kong|ğŸ‡­ğŸ‡°"}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾è‡ªåŠ¨, <<: *ut, filter: "(?i)å°|tw|taiwan|ğŸ‡¹ğŸ‡¼"}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾å‡è¡¡, <<: *lb, filter: "(?i)å°|tw|taiwan|ğŸ‡¹ğŸ‡¼"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨, <<: *ut, filter: "(?i)æ—¥|jp|japan|ğŸ‡¯ğŸ‡µ"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬å‡è¡¡, <<: *lb, filter: "(?i)æ—¥|jp|japan|ğŸ‡¯ğŸ‡µ"}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½è‡ªåŠ¨, <<: *ut, filter: "(?i)éŸ©|kr|korea|ğŸ‡°ğŸ‡·"}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½å‡è¡¡, <<: *lb, filter: "(?i)éŸ©|kr|korea|ğŸ‡°ğŸ‡·"}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨, <<: *ut, filter: "(?i)ç¾|us|united states|ğŸ‡ºğŸ‡¸"}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½å‡è¡¡, <<: *lb, filter: "(?i)ç¾|us|united states|ğŸ‡ºğŸ‡¸"}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨, <<: *ut, filter: "(?i)æ–°|sg|singapore|ğŸ‡¸ğŸ‡¬"}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡å‡è¡¡, <<: *lb, filter: "(?i)æ–°|sg|singapore|ğŸ‡¸ğŸ‡¬"}
  - {name: ğŸŒ å…¶ä»–è‡ªåŠ¨, <<: *ut, exclude-filter: "(?i)æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|éŸ©|kr|korea|ç¾|us|united states|æ–°|sg|singapore|ğŸ‡­ğŸ‡°|ğŸ‡¹ğŸ‡¼|ğŸ‡¯ğŸ‡µ|ğŸ‡°ğŸ‡·|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|å‰©ä½™|æµé‡|é‡ç½®|åˆ°æœŸ|è¿‡æœŸ|è®¢é˜…|å®˜ç½‘|é¢‘é“|ç¾¤ç»„|å¥—é¤|ç»­è´¹|å®¢æœ|é€šæŠ¥|å¤±è”|traffic|expire"}
  - {name: ğŸŒ å…¶ä»–å‡è¡¡, <<: *lb, exclude-filter: "(?i)æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|éŸ©|kr|korea|ç¾|us|united states|æ–°|sg|singapore|ğŸ‡­ğŸ‡°|ğŸ‡¹ğŸ‡¼|ğŸ‡¯ğŸ‡µ|ğŸ‡°ğŸ‡·|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|å‰©ä½™|æµé‡|é‡ç½®|åˆ°æœŸ|è¿‡æœŸ|è®¢é˜…|å®˜ç½‘|é¢‘é“|ç¾¤ç»„|å¥—é¤|ç»­è´¹|å®¢æœ|é€šæŠ¥|å¤±è”|traffic|expire"}

# --- Rules (æç®€è§„åˆ™) ---
rules:
  - GEOSITE,category-ads-all,REJECT
  - GEOIP,private,DIRECT,no-resolve
  - GEOSITE,cn,DIRECT
  - GEOIP,cn,DIRECT,no-resolve
  - MATCH,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
