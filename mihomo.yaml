# ============================================================
# Mihomo (Clash.Meta) ç»Ÿä¸€é…ç½®æ¨¡æ¿
# é€‚ç”¨å¹³å°: Linux / Android / Windows (ä¸‰ç«¯é€šç”¨)
# è®¾è®¡ç†å¿µ: ä¸æŒ‰æœåŠ¡åˆ†æµï¼Œä»…æŒ‰å›½å®¶/åœ°åŒºåˆ†ç»„ï¼Œæç®€è§„åˆ™
# ============================================================

# --- YAML Anchors (å…¬å…±è®¾ç½®å¤ç”¨) ---
pr: &pr
  type: url-test
  include-all-providers: true
  url: "http://cp.cloudflare.com/generate_204"
  interval: 180
  tolerance: 50
pp: &pp
  type: http
  interval: 86400
  proxy: DIRECT
  health-check:
    enable: true
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300
    lazy: true

# --- åŸºç¡€è®¾ç½® ---
mixed-port: 7890
mode: rule
log-level: warning
allow-lan: true
unified-delay: true
tcp-concurrent: true
find-process-mode: strict
global-client-fingerprint: chrome

external-controller: 127.0.0.1:9090
secret: "YOUR_CLASH_API_SECRET"

geodata-mode: true
geo-auto-update: true
geo-update-interval: 72
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"

# --- DNS é…ç½® (åˆ†æµ DNS) ---
dns:
  enable: true
  listen: :1053
  ipv6: false
  enhanced-mode: redir-host
  nameserver:
    - https://223.5.5.5/dns-query
    - https://1.12.12.12/dns-query
  proxy-server-nameserver:
    - https://223.5.5.5/dns-query
  nameserver-policy:
    "geosite:cn,private": [https://223.5.5.5/dns-query, https://1.12.12.12/dns-query]
    "geosite:geolocation-!cn": [https://8.8.4.4/dns-query, https://1.1.1.1/dns-query]

# --- Proxy Providers (è®¢é˜…æº) ---
proxy-providers:
  provider1:
    <<: *pp
    url: "YOUR_SUB_URL_1"
    path: ./providers/provider1.yaml

  provider2:
    <<: *pp
    url: "YOUR_SUB_URL_2"
    path: ./providers/provider2.yaml

  provider3:
    <<: *pp
    url: "YOUR_SUB_URL_3"
    path: ./providers/provider3.yaml

# --- Proxy Groups (èŠ‚ç‚¹ç»„) ---
proxy-groups:
  - {name: ğŸ”° èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [âš¡ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¹ğŸ‡¼ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡°ğŸ‡· éŸ©å›½, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸŒ å…¶ä»–åœ°åŒº, DIRECT]}
  - {name: âš¡ è‡ªåŠ¨é€‰æ‹©, <<: *pr, exclude-filter: "(?i)å‰©ä½™|æµé‡|é‡ç½®|åˆ°æœŸ|è¿‡æœŸ|è®¢é˜…|å®˜ç½‘|é¢‘é“|ç¾¤ç»„|å¥—é¤|ç»­è´¹|å®¢æœ|é€šæŠ¥|å¤±è”|traffic|expire"}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯, <<: *pr, filter: "(?i)æ¸¯|hk|hongkong|hong kong|ğŸ‡­ğŸ‡°"}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾, <<: *pr, filter: "(?i)å°|tw|taiwan|ğŸ‡¹ğŸ‡¼"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬, <<: *pr, filter: "(?i)æ—¥|jp|japan|ğŸ‡¯ğŸ‡µ"}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½, <<: *pr, filter: "(?i)éŸ©|kr|korea|ğŸ‡°ğŸ‡·"}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½, <<: *pr, filter: "(?i)ç¾|us|united states|ğŸ‡ºğŸ‡¸"}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, <<: *pr, filter: "(?i)æ–°|sg|singapore|ğŸ‡¸ğŸ‡¬"}
  - {name: ğŸŒ å…¶ä»–åœ°åŒº, <<: *pr, exclude-filter: "(?i)æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|éŸ©|kr|korea|ç¾|us|united states|æ–°|sg|singapore|ğŸ‡­ğŸ‡°|ğŸ‡¹ğŸ‡¼|ğŸ‡¯ğŸ‡µ|ğŸ‡°ğŸ‡·|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|å‰©ä½™|æµé‡|é‡ç½®|åˆ°æœŸ|è¿‡æœŸ|è®¢é˜…|å®˜ç½‘|é¢‘é“|ç¾¤ç»„|å¥—é¤|ç»­è´¹|å®¢æœ|é€šæŠ¥|å¤±è”|traffic|expire"}

# --- Rules (æç®€è§„åˆ™) ---
rules:
  - GEOSITE,category-ads-all,REJECT
  - GEOIP,private,DIRECT,no-resolve
  - GEOSITE,cn,DIRECT
  - GEOIP,cn,DIRECT,no-resolve
  - MATCH,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
